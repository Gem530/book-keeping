{"version":3,"sources":["uni-app:///main.js","webpack:///E:/uni-project/book-keeping/pages/index/index.vue?dc2b","webpack:///E:/uni-project/book-keeping/pages/index/index.vue?dc8b","webpack:///E:/uni-project/book-keeping/pages/index/index.vue?e664","webpack:///E:/uni-project/book-keeping/pages/index/index.vue?9708","uni-app:///pages/index/index.vue","webpack:///E:/uni-project/book-keeping/pages/index/index.vue?0256","webpack:///E:/uni-project/book-keeping/pages/index/index.vue?24e0"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","Sider","NavBar","BiaofunDatetimePicker","data","db","buget","endTime","billList","startTime","monthIncome","monthOutput","curMonth","chinesWeek","chinseMonths","computed","progressWidth","bugetBalance","id","theme","colorTheme","primaryTheme","onShow","uni","key","success","url","fail","methods","getMonthDay","initBuget","userId","time","and","that","initBill","endDate","orderBy","get","tempList","v","dateList","date","daybalance","list","changeDatetimePicker","formatDate","toggle","change","console","toPath","delBill","title","content"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACmK;AACnK,gBAAgB,6KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,sTAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1EA;AAAA;AAAA;AAAA;AAAkmB,CAAgB,+mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;AC0GtnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAIA;EACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;MACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;EACAC;IACA;IACAC;MACAC;MACAC;QACA;UACA;UACAF;YAAAG;UAAA;QACA;MACA;MACAC;QACA;QACAJ;UAAAG;QAAA;MACA;IACA;IACA;IACA;EACA;EACAE;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;QACAC;QACAC,0CACAC;MACA;QACA;QACAC;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACAC;MACAF;MACAA;MACAA;MACAA;;MAEA;MACA;QACAH;QACAC,0CACAC;MACA,GACAI;MAAA,CACAC;QACA;QACA;QACA;;QAEA;QACA;UACA;QAAA,CACA;QACA;QACAC;UACA;UACA,4DACAL;UAEAM;UACA;UACA;YAAA;UAAA;UACA;YACAC;YACAA;YACAA;UACA;YACAA;cAAAC;cAAAC;cAAAC;YAAA;UACA;QACA;QACAV;QACA;MACA;;MAEA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAW;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACAC;IACA;IACAC;MACA3B;QAAAG;MAAA;IACA;IACAyB;MACA;MACAF;MACA1B;QACA6B;QACAC;QACA5B;UACA;YACA;YACA;YACAF;cACAC;cACAC;gBACA;gBACA;kBAAA;gBAAA;gBACArB;gBACA6C;gBAEA1B;kBACAC;kBACApB;kBACAqB;oBACAF;sBAAA6B;oBAAA;oBACAlB;kBACA;kBACAP;oBACAJ;sBAAA6B;oBAAA;kBACA;gBACA;cACA;cACAzB;gBACAJ;kBAAA6B;gBAAA;cACA;YACA;UACA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACtVA;AAAA;AAAA;AAAA;AAAqqC,CAAgB,snCAAG,EAAC,C;;;;;;;;;;;ACAzrC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57280228\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&scoped=true&\"","var components\ntry {\n  components = {\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = Math.abs(_vm.monthOutput)\n  var g1 = _vm.buget ? Math.abs(_vm.monthOutput) : null\n  var g2 = _vm.billList.length\n  var l0 = g2\n    ? _vm.__map(_vm.billList, function (el, __i0__) {\n        var $orig = _vm.__get_orig(el)\n        var m0 = _vm.formatDate(el.date, \"MM/DD\")\n        var m1 = _vm.formatDate(el.date, \"d\")\n        return {\n          $orig: $orig,\n          m0: m0,\n          m1: m1,\n        }\n      })\n    : null\n  var m2 = !g2 ? _vm.formatDate(_vm.curMonth, \"M\") : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function (item) {\n      var args = [],\n        len = arguments.length - 1\n      while (len-- > 0) args[len] = arguments[len + 1]\n\n      var _temp = args[args.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        item = _temp2.item\n      var _temp, _temp2\n      return _vm.delBill(item)\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        l0: l0,\n        m2: m2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view :class=\"['content', theme]\">\r\n\t\t<!-- 导航栏 -->\r\n\t\t<NavBar>\r\n\t\t\t<template #left><uni-icons type=\"bars\" size=\"20\" @click=\"toggle\" :color=\"colorTheme\"></uni-icons></template>\r\n\t\t\t<template #center>\r\n\t\t\t\t<biaofun-datetime-picker\r\n\t\t\t\t\tend=\"2100\"\r\n\t\t\t\t\tstart=\"2000\"\r\n\t\t\t\t\tfields=\"month\"\r\n\t\t\t\t\t:defaultValue=\"curMonth\"\r\n\t\t\t\t\tplaceholder=\"请选择开始时间\"\r\n\t\t\t\t\t@change=\"changeDatetimePicker\"\r\n\t\t\t\t></biaofun-datetime-picker>\r\n\t\t\t</template>\r\n\t\t\t<template #right><uni-icons type=\"search\" size=\"20\" :color=\"colorTheme\" @click=\"toPath('/pages/search/search')\"></uni-icons></template>\r\n\t\t</NavBar>\r\n\t\t\r\n\t\t<!-- 总结余 -->\r\n\t\t<view class=\"balance\" :style=\"{background: primaryTheme + ' !important'}\">\r\n\t\t\t<view class=\"balance-list\">\r\n\t\t\t\t<view class=\"balance-item\">\r\n\t\t\t\t\t<view class=\"balance-info\">\r\n\t\t\t\t\t\t<view class=\"balance-item-title\">总结余</view>\r\n\t\t\t\t\t\t<view class=\"balance-item-value font-max\">￥{{monthIncome - Math.abs(monthOutput)}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"balance-list\">\r\n\t\t\t\t<view class=\"balance-item\" @click=\"toPath('/pageSub/pages/statistics/statistics?type=income')\">\r\n\t\t\t\t\t<uni-icons type=\"plus-filled\" size=\"35\" color=\"#ddd\"></uni-icons>\r\n\t\t\t\t\t<view class=\"balance-info\">\r\n\t\t\t\t\t\t<view class=\"balance-item-title\">月收入</view>\r\n\t\t\t\t\t\t<view class=\"balance-item-value\">￥{{monthIncome}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"balance-item\" @click=\"toPath('/pageSub/pages/statistics/statistics?type=output')\">\r\n\t\t\t\t\t<uni-icons type=\"minus-filled\" size=\"35\" color=\"#ddd\"></uni-icons>\r\n\t\t\t\t\t<view class=\"balance-info\">\r\n\t\t\t\t\t\t<view class=\"balance-item-title\">月支出</view>\r\n\t\t\t\t\t\t<view class=\"balance-item-value\">￥{{monthOutput}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 月预算 -->\r\n\t\t<view :class=\"['budget', theme]\" v-if=\"buget\">\r\n\t\t\t<view class=\"budget-flex\">\r\n\t\t\t\t<view class=\"budget-tip\">月预算</view>\r\n\t\t\t\t<view class=\"budget-value\">剩余:￥{{buget - Math.abs(monthOutput)}} &nbsp;&nbsp; 预算:￥{{buget}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"budget-progress\">\r\n\t\t\t\t<view class=\"budget-progress-bar\" :style=\"{width: progressWidth, background: primaryTheme + ' !important'}\"></view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 账单列表 -->\r\n\t\t<view class=\"bill\" v-if=\"billList.length\">\r\n\t\t\t<view\r\n\t\t\t\t:key=\"el.id\"\r\n\t\t\t\t class=\"bill-list-item\"\r\n\t\t\t\tv-for=\"el in billList\">\r\n\t\t\t\t<view class=\"bill-list-item-title\">\r\n\t\t\t\t\t{{formatDate(el.date, 'MM/DD')}}\r\n\t\t\t\t\t<text class=\"bill-list-week\">{{chinesWeek[formatDate(el.date, 'd')]}}</text>\r\n\t\t\t\t\t<text class=\"bill-list-daybalance\">￥{{el.daybalance}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view\r\n\t\t\t\t\t:key=\"item.id\"\r\n\t\t\t\t\tclass=\"bill-item\"\r\n\t\t\t\t\tv-for=\"item in el.list\"\r\n\t\t\t\t\t@click=\"() => delBill(item)\">\r\n\t\t\t\t\t<view class=\"bill-left\">\r\n\t\t\t\t\t\t<i :class=\"['iconfont', item.amountType.icon]\" :style=\"{'color': item.amountType.color || primaryTheme}\"></i>\r\n\t\t\t\t\t\t<view class=\"bill-left-type\">\r\n\t\t\t\t\t\t\t<view class=\"bill-type-name\">{{item.amountType.name}}</view>\r\n\t\t\t\t\t\t\t<view class=\"bill-type-remark\">{{item.remark}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"bill-right\">\r\n\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t:class=\"['bill-amount', item.type == 1 ? '' : 'red']\"\r\n\t\t\t\t\t\t\t:style=\"{'color': item.type == 1 ? primaryTheme : ''}\"\r\n\t\t\t\t\t\t>￥{{item.amount}}</view>\r\n\t\t\t\t\t\t<view class=\"bill-time\">{{item.time}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"bill-empty\" v-else>\r\n\t\t\t<view class=\"bill-empty-month\">{{chinseMonths[formatDate(curMonth, 'M') - 1]}}月</view>\r\n\t\t\t<view class=\"bill-empty-text\">无账单，快去记录你的账单吧~</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 去登录-->\r\n\t\t<!-- <uni-icons class=\"to-login\" type=\"person\" size=\"50\" :color=\"primaryTheme\" @click=\"toPath('/pages/login/index')\"></uni-icons> -->\r\n\t\t<!-- 悬浮图标  -->\r\n\t\t<uni-icons class=\"fixed-icon\" type=\"plus-filled\" size=\"50\" :color=\"primaryTheme\" @click=\"toPath('/pages/add-bill/add-bill')\"></uni-icons>\r\n\t\t\r\n\t\t<!-- 侧边栏 -->\r\n\t\t<Sider ref=\"sider\" :curMonth=\"curMonth\" @change=\"change\" @initBuget=\"initBuget\" @initBill=\"initBill\"></Sider>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport dayjs from 'dayjs'\r\n\timport Sider from '@/component/sider/index.vue'\r\n\timport NavBar from '@/component/nav-bar/nav-bar.vue'\r\n\timport BiaofunDatetimePicker from '@/component/biaofun-datetime-picker/biaofun-datetime-picker.vue'\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tSider,\r\n\t\t\tNavBar,\r\n\t\t\tBiaofunDatetimePicker,\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdb: uniCloud.database(),\r\n\t\t\t\tbuget: 0,\r\n\t\t\t\tendTime: undefined,\r\n\t\t\t\tbillList: [],\r\n\t\t\t\tstartTime: undefined,\r\n\t\t\t\tmonthIncome: 0,\r\n\t\t\t\tmonthOutput: 0,\r\n\t\t\t\tcurMonth: dayjs(new Date()).format('YYYY-MM-DD HH:mm'),\r\n\t\t\t\tchinesWeek: ['周日','周一','周二','周三','周四','周五','周六'],\r\n\t\t\t\tchinseMonths: ['一','二','三','四','五','六','七','八','九','十','十一','十二'],\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tprogressWidth () {\r\n\t\t\t\tlet bugetBalance = this.buget - Math.abs(this.monthOutput)\r\n\t\t\t\tbugetBalance = bugetBalance < 0 ? 0 : bugetBalance\r\n\t\t\t\tconst res = (bugetBalance / this.buget) * 100\r\n\t\t\t\treturn res + '%'\r\n\t\t\t},\r\n\t\t\tid () {\r\n\t\t\t\treturn this.$store.getters.idLive\r\n\t\t\t},\r\n\t\t\ttheme () {\r\n\t\t\t\treturn this.$store.getters.themeLive\r\n\t\t\t},\r\n\t\t\tcolorTheme () {\r\n\t\t\t\treturn this.$store.getters.textColorLive\r\n\t\t\t},\r\n\t\t\tprimaryTheme () {\r\n\t\t\t\treturn this.$store.getters.primaryColorLive\r\n\t\t\t},\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t// this.getData()\r\n\t\t\tuni.getStorage({\r\n\t\t\t\tkey: 'token',\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tif (!res.data) {\r\n\t\t\t\t\t\t// 未登录\r\n\t\t\t\t\t\tuni.navigateTo({ url:'/pages/login/index' })\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail() {\r\n\t\t\t\t\t// 未登录\r\n\t\t\t\t\tuni.navigateTo({ url:'/pages/login/index' })\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tthis.initBill()\r\n\t\t\tthis.initBuget()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// getData () {\r\n\t\t\t// \tuni.getStorageInfo({\r\n\t\t\t// \t\tsuccess(res) {\r\n\t\t\t// \t\t\tconsole.log(res)\r\n\t\t\t// \t\t}\r\n\t\t\t// \t})\r\n\t\t\t// },\r\n\t\t\tgetMonthDay(year, month) {\r\n\t\t\t  let days = new Date(year, Number(month), 0).getDate()\r\n\t\t\t  return days\r\n\t\t\t},\r\n\t\t\tinitBuget () {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tthis.db.collection('buget').where({\r\n\t\t\t\t\tuserId: this.id,\r\n\t\t\t\t\ttime: that.db.command.gte(that.startTime)\r\n\t\t\t\t\t\t.and(that.db.command.lte(that.endTime))\r\n\t\t\t\t}).get().then(res => {\r\n\t\t\t\t\t// console.log(res)\r\n\t\t\t\t\tthat.buget = res.result.data.length ? res.result.data[0].buget : 0\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinitBill () {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tconst curDate = dayjs(this.curMonth).format('YYYY-MM')\r\n\t\t\t\t// console.log(curDate)\r\n\t\t\t\tconst yAndM = curDate.toString().split('-')\r\n\t\t\t\tlet endDate = this.getMonthDay(yAndM[0], yAndM[1])\r\n\t\t\t\tendDate = endDate < 10 ? '0' + endDate: endDate\r\n\t\t\t\tthat.startTime = new Date(curDate+'-01 00:00:00').getTime()\r\n\t\t\t\tthat.endTime = new Date(curDate+'-'+endDate+' 23:59:59').getTime()\r\n\t\t\t\tthat.monthIncome = 0\r\n\t\t\t\tthat.monthOutput = 0\r\n\t\t\t\t\r\n\t\t\t\t// console.log(startTime, endTime)\r\n\t\t\t\tthis.db.collection('bill').where({\r\n\t\t\t\t\tuserId: this.id,\r\n\t\t\t\t\ttime: that.db.command.gte(that.startTime)\r\n\t\t\t\t\t\t.and(that.db.command.lte(that.endTime))\r\n\t\t\t\t})\r\n\t\t\t\t.orderBy('time', 'desc') // 1字段排序的字段 2字段排序的顺序，升序(asc) 或 降序(desc)\r\n\t\t\t\t.get().then((res) => {\r\n\t\t\t\t\tconst data = res.result.data\r\n\t\t\t\t\tconst tempList = data\r\n\t\t\t\t\t// console.log(data)\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 按照日期排序\r\n\t\t\t\t\tconst dateList = [\r\n\t\t\t\t\t\t// { date: 'xxxx-xx-xx', daybalance: 0, list: [] }\r\n\t\t\t\t\t]\r\n\t\t\t\t\tif (!data.length) return\r\n\t\t\t\t\ttempList.map(v => {\r\n\t\t\t\t\t\t// 计算总收入和总支出\r\n\t\t\t\t\t\tif (v.type === 1) that.monthIncome += Number(v.amount)\r\n\t\t\t\t\t\telse that.monthOutput += Number(v.amount)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tv.time = dayjs(v.time).format('YYYY-MM-DD HH:mm')\r\n\t\t\t\t\t\tconst date = dayjs(v.time).format('YYYY-MM-DD')\r\n\t\t\t\t\t\tconst index = dateList.findIndex(el => el.date == date)\r\n\t\t\t\t\t\tif (index != -1) {\r\n\t\t\t\t\t\t\tdateList[index].list.push(v)\r\n\t\t\t\t\t\t\tdateList[index].daybalance += Number(v.amount)\r\n\t\t\t\t\t\t\tdateList[index].daybalance = (dateList[index].daybalance * 100) / 100\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdateList.push({ date, daybalance: v.amount, list: [v] })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthat.billList = dateList\r\n\t\t\t\t\t// console.log(data, that.billList)\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t// uni.getStorage({\r\n\t\t\t\t// \tkey: 'bill:' + curDate,\r\n\t\t\t\t// \tsuccess(res) {\r\n\t\t\t\t// \t\tconst data = JSON.parse(res.data)\r\n\t\t\t\t// \t\tthat.buget = data.buget || 0\r\n\t\t\t\t\t\t\r\n\t\t\t\t// \t\tconst tempList = data.list || []\r\n\t\t\t\t// \t\tif (tempList.length) {\r\n\t\t\t\t// \t\t\t// 按照日期排序\r\n\t\t\t\t// \t\t\ttempList.sort((a,b)=> { return (new Date(b.time).getTime() - new Date(a.time).getTime()) })\r\n\t\t\t\t// \t\t\ttempList.forEach((v) => {\r\n\t\t\t\t// \t\t\t\t// 计算总收入和总支出\r\n\t\t\t\t// \t\t\t\tif (v.type === 1) that.monthIncome += Number(v.amount)\r\n\t\t\t\t// \t\t\t\telse that.monthOutput += Number(v.amount)\r\n\t\t\t\t// \t\t\t})\r\n\t\t\t\t// \t\t\tthat.monthIncome = (that.monthIncome * 100) / 100\r\n\t\t\t\t// \t\t\tthat.monthOutput = (that.monthOutput * 100) / 100\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t// \t\t\t// 按照日期排序\r\n\t\t\t\t// \t\t\tconst dateList = [\r\n\t\t\t\t// \t\t\t\t// { date: 'xxxx-xx-xx', daybalance: 0, list: [] }\r\n\t\t\t\t// \t\t\t]\r\n\t\t\t\t// \t\t\ttempList.map((v) => {\r\n\t\t\t\t// \t\t\t\tconst date = dayjs(v.time).format('YYYY-MM-DD')\r\n\t\t\t\t// \t\t\t\tconst index = dateList.findIndex(el => el.date == date)\r\n\t\t\t\t// \t\t\t\tif (index != -1) {\r\n\t\t\t\t// \t\t\t\t\tdateList[index].list.push(v)\r\n\t\t\t\t// \t\t\t\t\tdateList[index].daybalance += v.amount\r\n\t\t\t\t// \t\t\t\t\tdateList[index].daybalance = (dateList[index].daybalance * 100) / 100\r\n\t\t\t\t// \t\t\t\t} else {\r\n\t\t\t\t// \t\t\t\t\tdateList.push({ date, daybalance: v.amount, list: [v] })\r\n\t\t\t\t// \t\t\t\t}\r\n\t\t\t\t// \t\t\t})\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t// \t\t\tthat.billList = dateList\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t},\r\n\t\t\t\t// \tfail() {\r\n\t\t\t\t// \t\tthat.buget = 0\r\n\t\t\t\t// \t\tthat.billList = []\r\n\t\t\t\t// \t\tthat.monthIncome = 0\r\n\t\t\t\t// \t\tthat.monthOutput = 0\r\n\t\t\t\t// \t}\r\n\t\t\t\t// })\r\n\t\t\t},\r\n\t\t\tchangeDatetimePicker (date) {\r\n\t\t\t\tthis.curMonth = `${date.YYYY}-${date.MM}-${date.DD} ${date.hh}:${date.mm}`\r\n\t\t\t\tthis.initBill()\r\n\t\t\t\tthis.initBuget()\r\n\t\t\t},\r\n\t\t\tformatDate (value, format) {\r\n\t\t\t\tconst res = dayjs(value).format(format)\r\n\t\t\t\treturn res\r\n\t\t\t},\r\n\t\t\ttoggle() {\r\n\t\t\t\tthis.$refs.sider.$refs.popup.open('left')\r\n\t\t\t},\r\n\t\t\tchange (e) {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t},\r\n\t\t\ttoPath (v) {\r\n\t\t\t\tuni.navigateTo({url: v})\r\n\t\t\t},\r\n\t\t\tdelBill (v) {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tconsole.log(v)\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '确认删除当前账单吗？',\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tif (res?.confirm) {\r\n\t\t\t\t\t\t\tconst storgeKey = 'bill:' + dayjs(v.time).format('YYYY-MM')\r\n\t\t\t\t\t\t\tlet resData = null\r\n\t\t\t\t\t\t\tuni.getStorage({\r\n\t\t\t\t\t\t\t\tkey: storgeKey,\r\n\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\tconst data = JSON.parse(res.data)\r\n\t\t\t\t\t\t\t\t\tconst index = data.list.findIndex(el => el.createdTime == v.createdTime && el.amount == v.amount)\r\n\t\t\t\t\t\t\t\t\tdata.list.splice(index, 1)\r\n\t\t\t\t\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\t\t\t\t\tkey: storgeKey,\r\n\t\t\t\t\t\t\t\t\t\tdata: JSON.stringify(data),\r\n\t\t\t\t\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({title: '删除成功'})\r\n\t\t\t\t\t\t\t\t\t\t\tthat.initBill()\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({title: '删除失败'})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({title: '删除失败'})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.content {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tjustify-content: flex-start;\r\n\tmin-height: 100vh;\r\n\tpadding: 0 0 30rpx;\r\n\t// background: var(--theme-body-bg);\r\n\t\r\n\t.balance {\r\n\t\twidth: 710rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tmargin: 20rpx 0;\r\n\t\tcolor: #ffffff;\r\n\t\tborder-radius: 15rpx;\r\n\t\t\r\n\t\t.balance-list {\r\n\t\t\t@include flex(flex-start);\r\n\t\t\t\r\n\t\t\t&:not(:last-child) {\r\n\t\t\t\tmargin-bottom: 30rpx;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.balance-item {\r\n\t\t\t\t@include flex(flex-start);\r\n\t\t\t\tflex: 1;\r\n\t\t\t\t\r\n\t\t\t\t.uni-icons {\r\n\t\t\t\t\tmargin-right: 5rpx;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t.balance-info {\r\n\t\t\t\t\t.balance-item-title {\r\n\t\t\t\t\t\tmargin-bottom: 10rpx;\r\n\t\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\t\tcolor: #ddd;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t.balance-item-value {\r\n\t\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t&.font-max {\r\n\t\t\t\t\t\t\tfont-size: 38rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t.budget {\r\n\t\twidth: 710rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\t// background: var(--theme-body-bg);\r\n\t\tborder-radius: 10rpx;\r\n\t\tbox-shadow: 0 0 6rpx rgba($color: #000000, $alpha: 0.3);\r\n\t\t\r\n\t\t.budget-flex {\r\n\t\t\t@include flex(space-between);\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\t// color: var(--theme-text-color);\r\n\t\t}\r\n\t\t.budget-progress {\r\n\t\t\tposition: relative;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 20rpx;\r\n\t\t\tbackground: #ddd;\r\n\t\t\tmargin-top: 20rpx;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\t\r\n\t\t\t.budget-progress-bar {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: 0;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tborder-radius: 20rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t.bill {\r\n\t\twidth: 710rpx;\r\n\t\t\r\n\t\t.bill-list-item {\r\n\t\t\tmargin-top: 20rpx;\r\n\t\t\t\r\n\t\t\t.bill-list-item-title {\r\n\t\t\t\t@include flex(flex-start, flex-end);\r\n\t\t\t\tpadding: 10rpx 5rpx;\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t\tletter-spacing: 2rpx;\r\n\t\t\t\t\r\n\t\t\t\t.bill-list-week {\r\n\t\t\t\t\tpadding-left: 20rpx;\r\n\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\tcolor: #ddd;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t.bill-list-daybalance {\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\tcolor: #ddd;\r\n\t\t\t\t\ttext-align: right;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.bill-item {\r\n\t\t\t\t@include flex(space-between);\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tpadding: 30rpx;\r\n\t\t\t\tmargin-bottom: 10rpx;\r\n\t\t\t\tborder: 1px solid #ddd;\r\n\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\t\r\n\t\t\t\t.bill-left {\r\n\t\t\t\t\t@include flex(flex-start);\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\r\n\t\t\t\t\t.iconfont {\r\n\t\t\t\t\t\tmargin-right: 5rpx;\r\n\t\t\t\t\t\tfont-size: 60rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t.bill-left-type {\r\n\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\t.bill-type-name {\r\n\t\t\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t.bill-type-remark {\r\n\t\t\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\t\t\tcolor: #ddd;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t.bill-right {\r\n\t\t\t\t\twidth: 210rpx;\r\n\t\t\t\t\ttext-align: right;\r\n\t\t\t\t\t\r\n\t\t\t\t\t.bill-amount {\r\n\t\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// &.red {\r\n\t\t\t\t\t\t// \tcolor: orangered;\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.bill-time {\r\n\t\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\t\tcolor: #ddd;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t.bill-empty {\r\n\t\tpadding-top: 120rpx;\r\n\t\ttext-align: center;\r\n\t\tcolor: #dfd9d9;\r\n\t\t.bill-empty-month {\r\n\t\t\tfont-size: 70rpx;\r\n\t\t\tfont-weight: 600;\r\n\t\t}\r\n\t\t.bill-empty-text {\r\n\t\t\tmargin-top: 40rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t}\r\n\t}\r\n\t\r\n\t.fixed-icon {\r\n\t\tposition: fixed;\r\n\t\tright: 30rpx;\r\n\t\tbottom: 30rpx;\r\n\t\tz-index: 2;\r\n\t}\r\n\t\r\n\t.to-login {\r\n\t\tposition: fixed;\r\n\t\tright: 30rpx;\r\n\t\tbottom: 130rpx;\r\n\t\tz-index: 2;\r\n\t}\r\n}\r\n\r\n.dark {\r\n\t.budget {\r\n\t\tbackground: rgba($color: #000000, $alpha: 0.3);\r\n\t}\r\n}\r\n</style>\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1692672363799\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}